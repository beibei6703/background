webpackJsonp([33],{FcCV:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("mtWM");var l=r("mw3O"),a=r.n(l),i=r("14gb"),s=r("vUNl"),o={name:"increasead",data:function(){return{limit:1,imgurl:"",place_id:"",options:[],fileList:[],dialogImageUrl:"",dialogVisible:!1,postData:{token:""},ruleForm:{title:"",url:"",create_time:"",end_time:"",delivery:!0,value:""},rules:{title:[{required:!0,message:"请输入活动名称",trigger:"blur"}],url:[{required:!0,message:"请输入地址url",trigger:"blur"}],value:[{required:!0,message:"请选择位置",trigger:"change"}],create_time:[{type:"date",required:!0,message:"请选择开始日期",trigger:"change"}],end_time:[{type:"date",required:!0,message:"请选择结束日期",trigger:"change"}]}}},methods:{handledata:function(e){console.log(e),this.ruleForm.value=e},getSelect:function(e){this.place_id=e},getChoose:function(){Object(s.a)().then(this.handleChoose.bind(this))},handleChoose:function(e){var t=e.data;1==t.status&&t.info&&(this.options=t.info)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleAvatarSuccess:function(e,t){this.dialogImageUrl=this.qiniu_cdn+e.key,this.imgurl=e.key},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;switch(t.ruleForm.delivery){case!0:t.status=1;break;case!1:t.status=0}var r=a.a.stringify({place_id:t.place_id,image:t.imgurl,url:t.ruleForm.url,begin_time:t.ruleForm.create_time,end_time:t.ruleForm.create_time,title:t.ruleForm.title,status:t.status});Object(s.d)(r).then(t.handleSucc.bind(t))})},handleSucc:function(e){var t=e.data;1==t.status?(this.$message({showClose:!0,message:t.msg,type:"success"}),this.$router.go(-1)):this.$message({showClose:!0,message:t.msg,type:"error"})},resetForm:function(e){this.$router.go(-1)}},created:function(){var e=this;i.a.$on("trandata",this.handledata),this.getChoose(),Object(s.o)().then(function(t){e.postData.token=t.data.info})},beforeDestroy:function(){i.a.$off("trandata",this.handledata)}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wraper"},[e._m(0),e._v(" "),r("div",{staticClass:"forms_box"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"名称",prop:"title"}},[r("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),r("el-form-item",{staticClass:"loadimg",attrs:{label:"背景图片：",prop:"image"}},[r("el-upload",{attrs:{action:"https://upload.qiniup.com","list-type":"picture-card","on-success":e.handleAvatarSuccess,"on-preview":e.handlePictureCardPreview,"file-list":e.fileList,data:e.postData,limit:1}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),r("el-form-item",{attrs:{label:"开始时间",prop:"create_time"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期"},model:{value:e.ruleForm.create_time,callback:function(t){e.$set(e.ruleForm,"create_time",t)},expression:"ruleForm.create_time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择时间"},model:{value:e.ruleForm.end_time,callback:function(t){e.$set(e.ruleForm,"end_time",t)},expression:"ruleForm.end_time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"位置",prop:"value"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getSelect},model:{value:e.ruleForm.value,callback:function(t){e.$set(e.ruleForm,"value",t)},expression:"ruleForm.value"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"链接",prop:"url"}},[r("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url",t)},expression:"ruleForm.url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"状态",prop:"delivery"}},[r("el-switch",{model:{value:e.ruleForm.delivery,callback:function(t){e.$set(e.ruleForm,"delivery",t)},expression:"ruleForm.delivery"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("返回")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"publish-task-top"},[t("span",[this._v("新增广告")])])}]};var u=r("VU/8")(o,n,!1,function(e){r("knfJ")},"data-v-43750b0a",null);t.default=u.exports},knfJ:function(e,t){}});
//# sourceMappingURL=33.0b09eddf0d2af852e785.js.map