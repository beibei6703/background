webpackJsonp([38],{"8lt+":function(e,r){},"B/Hd":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("mw3O"),a=t.n(s),l=t("nv77"),o={name:"addaccount",data:function(){var e=this;return{roles:[],listInfo:[],checkAll:!1,checkItem:[],checkItem1:[],role_id:"",isIndeterminate:!0,arr:[],getrules:[],ruleForm:{value:"",username:"",password:"",password_confirm:"",realname:""},rules:{username:[{required:!0,message:"请输入用户账号",trigger:"blur"}],password:[{required:!0,message:"请输入初始密码",trigger:"blur"}],password_confirm:[{required:!0,message:"请再次输入初始密码",trigger:"blur"},{validator:function(r,t,s){""===t?s(new Error("请再次输入密码")):t!==e.ruleForm.password?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],realname:[{required:!0,message:"请输入使用者姓名",trigger:"blur"}],value:[{required:!0,message:"请选择职位",trigger:"change"}]},radio:"1",options:[{value:"选项1",label:"店铺基本信息"}],value:""}},methods:{handleCheckeditems:function(e){console.log(this.checkItem)},handleCheckeditemsChange:function(e){console.log(this.checkItem)},handleChange:function(e){console.log(e),this.role_id=e;var r=a.a.stringify({id:e});Object(l.g)(r).then(this.handleRuleSucc.bind(this))},handleRuleSucc:function(e){console.log(e);var r=e.data;1==r.status&&r.info&&(this.getrules=r.info.rules,this.getrules=this.getrules.map(function(e){return parseInt(e)}),this.checkItem=this.getrules,console.log(this.checkItem))},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t=a.a.stringify({username:r.ruleForm.username,password:r.ruleForm.password,password_confirm:r.ruleForm.password_confirm,realname:r.ruleForm.realname,role_id:r.role_id,rules:r.checkItem});Object(l.a)(t).then(r.handleAddSucc.bind(r))})},handleAddSucc:function(e){console.log(e);var r=e.data;1==r.status?(this.$message({showClose:!0,message:r.msg,type:"success"}),this.getdata(),this.$router.push("/accountnum")):this.$message({showClose:!0,message:r.msg,type:"error"})},resetForm:function(e){this.$refs[e].resetFields()},getdata:function(){var e=this;Object(l.h)().then(function(r){if(1==r.data.status&&r.data.info){var t=[];for(var s in r.data.info)t.push(r.data.info[s]);e.listInfo=t}}),Object(l.e)().then(function(r){console.log(r),1==r.data.status&&(e.roles=r.data.info)})}},created:function(){this.getdata()}},n={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"wrapper"},[t("div",{staticClass:"header_shop"},[t("span",{staticClass:"blueColor"},[t("router-link",{attrs:{to:"/accountnum"}},[e._v("账户管理 >")])],1),e._v(" "),t("span",[e._v("添加账号")])]),e._v(" "),t("div",{staticClass:"shop_info"},[t("p",{staticClass:"info_tit"},[e._v("账号基本信息")]),e._v(" "),t("div",{staticClass:"forms"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"账号",prop:"username"}},[t("el-input",{model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"初始密码",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认初始密码",prop:"password_confirm"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password_confirm,callback:function(r){e.$set(e.ruleForm,"password_confirm",r)},expression:"ruleForm.password_confirm"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"使用者",prop:"realname"}},[t("el-input",{model:{value:e.ruleForm.realname,callback:function(r){e.$set(e.ruleForm,"realname",r)},expression:"ruleForm.realname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"使用者职位",prop:"value"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.ruleForm.value,callback:function(r){e.$set(e.ruleForm,"value",r)},expression:"ruleForm.value"}},e._l(e.roles,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("p",{staticClass:"info_tit"},[e._v("权限设置")]),e._v(" "),e._l(e.listInfo,function(r,s){return t("div",{key:s,staticClass:"role_one"},[t("el-checkbox-group",{on:{change:e.handleCheckeditems},model:{value:e.checkItem,callback:function(r){e.checkItem=r},expression:"checkItem"}},[t("el-checkbox",{attrs:{label:r.id}},[e._v(e._s(r.title))])],1),e._v(" "),t("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),t("el-checkbox-group",{on:{change:e.handleCheckeditemsChange},model:{value:e.checkItem,callback:function(r){e.checkItem=r},expression:"checkItem"}},e._l(r.children,function(r){return t("el-checkbox",{key:r.id,staticClass:"box_child",attrs:{label:r.id}},[e._v(e._s(r.title))])}))],1)}),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submitForm("ruleForm")}}},[e._v("确定")]),e._v(" "),t("el-button",{on:{click:function(r){e.resetForm("ruleForm")}}},[e._v("取消")])],1)],2)],1)])])},staticRenderFns:[]};var i=t("VU/8")(o,n,!1,function(e){t("8lt+")},"data-v-22cc0807",null);r.default=i.exports}});
//# sourceMappingURL=38.54840acf1104cda2c11e.js.map