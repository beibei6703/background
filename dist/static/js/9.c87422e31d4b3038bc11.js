webpackJsonp([9],{"5yTO":function(t,e){},N56B:function(t,e){},QFrE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("mtWM");var i=a("X+ce"),n=a("mw3O"),s=a.n(n),u={name:"teplist",data:function(){return{tableData:[],money:"",dialogFormVisible:!1,value3:!0,input:"",status:!0,temp_id:"",img:"",imgs:[],postData:{token:""}}},created:function(){var t=this;Object(i.n)().then(function(e){1==e.data.status?t.postData.token=e.data.info:t.mistake()}),this.information()},methods:{handleAvatarSuccess:function(t,e){this.img=t.key},information:function(){var t=this;Object(i.l)().then(function(e){1==e.data.status?t.tableData=e.data.info:t.mistake(e)})},temp_status:function(t,e){var a,n=this;a=1==e?1:0;var u=s.a.stringify({status:a,id:t});Object(i.m)(u).then(function(t){1==t.data.status?(n.succeed(t),n.information()):n.mistake(t)})},temlp_delete:function(t){var e=this,a=s.a.stringify({id:t});Object(i.i)(a).then(function(t){1==t.data.status?(e.succeed(t),e.information()):e.mistake(t)})},temlp_add:function(t){var e=this;if(this.dialogFormVisible=!0,"add"==t)this.status=!0,this.input="",this.temp_id="",this.imgs=[],this.img="";else{this.status=!1;var a=s.a.stringify({id:t});Object(i.j)(a).then(function(t){console.log(t.data.info.id),e.input=t.data.info.template_name,e.temp_id=t.data.info.id,e.imgs=[{url:e.qiniu_cdn+t.data.info.img}],e.img=t.data.info.img})}},handleSubSucc:function(t){1==t.data.status?(this.succeed(t),this.dialogFormVisible=!1,this.value3=!1,this.input="",this.information()):this.mistake(t)},submit:function(){var t;if(t=1==this.value3?1:0,this.status){var e=s.a.stringify({template_name:this.input,status:t,img:this.img});Object(i.a)(e).then(this.handleSubSucc.bind(this))}else{e=s.a.stringify({template_name:this.input,id:this.temp_id,img:this.img});Object(i.k)(e).then(this.handleSubSucc.bind(this))}},temlp_attr:function(t,e){this.$router.push({path:"/tep_attr",query:{id:t,name:e}})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wraper"},[a("div",{staticClass:"publish-task-top"},[a("span",[t._v("模板管理")]),t._v(" "),a("el-button",{on:{click:function(e){t.temlp_add("add")}}},[t._v("新增模板")])],1),t._v(" "),a("div",{staticClass:"table_tabs"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"template_name",label:"名称",width:"130",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{value:e.row.status},on:{change:function(a){t.temp_status(e.row.id,e.row.status)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.temlp_add(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.temlp_delete(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.temlp_attr(e.row.id,e.row.template_name)}}},[t._v("属性")])]}}])})],1)],1),t._v(" "),a("el-dialog",{staticClass:"manuscripts",attrs:{title:"模板详情",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"模板名称："}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入模板名称"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),t._v(" "),t.status?a("el-form-item",{attrs:{label:"状态："}},[a("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用"},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}})],1):t._e(),t._v(" "),a("el-form-item",{staticClass:"loadimg",attrs:{label:"默认图片："}},[a("el-upload",{attrs:{action:"https://upload.qiniup.com","list-type":"picture-card","on-success":t.handleAvatarSuccess,"file-list":t.imgs,data:t.postData,limit:1}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"text-align":"center"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(u,r,!1,function(t){a("5yTO"),a("N56B")},"data-v-5ff252dc",null);e.default=o.exports},"X+ce":function(t,e,a){"use strict";a.d(e,"l",function(){return n}),a.d(e,"m",function(){return s}),a.d(e,"i",function(){return u}),a.d(e,"a",function(){return r}),a.d(e,"j",function(){return o}),a.d(e,"k",function(){return l}),a.d(e,"g",function(){return c}),a.d(e,"h",function(){return d}),a.d(e,"f",function(){return m}),a.d(e,"d",function(){return p}),a.d(e,"c",function(){return f}),a.d(e,"b",function(){return b}),a.d(e,"e",function(){return h}),a.d(e,"n",function(){return v});var i=a("D/cR"),n=function(t){return Object(i.a)({method:"post",url:"admin/template/index",data:t})},s=function(t){return Object(i.a)({method:"post",url:"admin/template/status",data:t})},u=function(t){return Object(i.a)({method:"post",url:"admin/template/delete",data:t})},r=function(t){return Object(i.a)({method:"post",url:"admin/template/add",data:t})},o=function(t){return Object(i.a)({method:"post",url:"admin/template/detail",data:t})},l=function(t){return Object(i.a)({method:"post",url:"admin/template/edit",data:t})},c=function(t){return Object(i.a)({method:"post",url:"admin/index/attrrule",data:t})},d=function(t){return Object(i.a)({method:"post",url:"admin/index/attrtype",data:t})},m=function(t){return Object(i.a)({method:"post",url:"admin/attributes/index",data:t})},p=function(t){return Object(i.a)({method:"post",url:"admin/attributes/delete",data:t})},f=function(t){return Object(i.a)({method:"post",url:"admin/attributes/detail",data:t})},b=function(t){return Object(i.a)({method:"post",url:"admin/attributes/add",data:t})},h=function(t){return Object(i.a)({method:"post",url:"admin/attributes/edit",data:t})},v=function(t){return Object(i.a)({method:"post",url:"business/index/qiniu",data:t})}}});
//# sourceMappingURL=9.c87422e31d4b3038bc11.js.map