webpackJsonp([15],{BJ3J:function(t,i){},ORRb:function(t,i){},"jb+w":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});e("mtWM");var a=e("mw3O"),n=e.n(a),s=e("D/cR"),l={name:"menus",data:function(){return{idArr:[],data5:[],form:{pid:0,name:"",title:"",is_visible:"",url:"",class:""},parent:"顶级菜单",value:!0,rules:{},dialogFormVisible:!1,input:"",status:!0,temp_id:"",data:"",click_status:"新增"}},created:function(){this.information()},methods:{information:function(){var t=this;(function(t){return Object(s.a)({method:"post",url:"admin/menu/index",data:t})})(n.a.stringify({temp_id:this.$route.query.id})).then(function(i){if(1==i.data.status){var e=[];for(var a in i.data.info)e.push(i.data.info[a]);t.data5=e,t.data5.forEach(function(i){t.idArr.push(i.id)}),console.log(t.idArr)}else t.mistake(i)})},submit:function(t){var i=this;this.$refs[t].validate(function(t){if(t){1==i.value?i.form.is_visible=1:i.form.is_visible=0;var e=n.a.stringify(i.form);"新增"==i.click_status?function(t){return Object(s.a)({method:"post",url:"admin/menu/add",data:t})}(e).then(function(t){1==t.data.status?(i.succeed(t),i.dialogFormVisible=!1,i.information(),i.form={pid:0,name:"",title:"",is_visible:"",url:""}):i.mistake(t)}):function(t){return Object(s.a)({method:"post",url:"admin/menu/edit",data:t})}(e).then(function(t){1==t.data.status?(i.succeed(t),i.dialogFormVisible=!1,i.information(),i.form={pid:0,name:"",title:"",is_visible:"",url:""}):i.mistake(t)})}})},temlp_add:function(){this.dialogFormVisible=!0,this.form.id="",this.parent="顶级菜单"},append:function(t){this.dialogFormVisible=!0,this.form={name:"",title:"",is_visible:"",url:""},this.data=t,this.form.pid=this.data.data.id,this.click_status="新增",this.parent=this.data.data.title},remove:function(t,i){var e=this,a=i.id;(function(t){return Object(s.a)({method:"post",url:"admin/menu/delete",data:t})})(n.a.stringify({id:a})).then(function(t){1==t.data.status&&(e.succeed(t),e.information())})},edit:function(t,i){var e=this;this.dialogFormVisible=!0,this.click_status="编辑";var a=i.id;(function(t){return Object(s.a)({method:"post",url:"admin/menu/detail",data:t})})(n.a.stringify({id:a})).then(function(t){e.parent=t.data.info.parent,e.form.pid=t.data.info.pid,e.form.name=t.data.info.name,e.form.title=t.data.info.title,e.form.is_visible=t.data.info.is_visible,e.form.id=t.data.info.id,e.form.url=t.data.info.url,e.form.class=t.data.info.class,1==e.form.is_visible?e.value=!0:e.value=!1})}}},o={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"wraper"},[e("div",{staticClass:"publish-task-top"},[e("span",[t._v("菜单管理")]),t._v(" "),e("el-button",{on:{click:function(i){t.temlp_add("add")}}},[t._v("新增模板")])],1),t._v(" "),e("div",{staticClass:"custom-tree-container"},[e("div",{staticClass:"block"},[e("el-tree",{attrs:{data:t.data5,"node-key":"id","default-expanded-keys":[30],"expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.node,n=i.data;return e("span",{staticClass:"custom-tree-node"},[e("span",[t._v(t._s(a.data.title))]),t._v(" "),e("span",[0==a.data.pid?e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.append(a)}}},[t._v("\n          添加\n        ")]):t._e(),t._v(" "),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.remove(a,n)}}},[t._v("\n          删除\n        ")]),t._v(" "),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.edit(a,n)}}},[t._v("\n          编辑\n        ")])],1)])}}])})],1)]),t._v(" "),e("el-dialog",{staticClass:"manuscripts",attrs:{title:"菜单详情",visible:t.dialogFormVisible},on:{"update:visible":function(i){t.dialogFormVisible=i}}},[e("el-form",{ref:"form",staticClass:"f demo-form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[e("el-form-item",{attrs:{label:"父级菜单："}},[t._v("\n        "+t._s(t.parent)+"\n      ")]),t._v(" "),e("el-form-item",{attrs:{label:"后台路由："}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(i){t.$set(t.form,"name",i)},expression:"form.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"菜单名称："}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.title,callback:function(i){t.$set(t.form,"title",i)},expression:"form.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"前台路由："}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.url,callback:function(i){t.$set(t.form,"url",i)},expression:"form.url"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"class名："}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.class,callback:function(i){t.$set(t.form,"class",i)},expression:"form.class"}})],1),t._v(" "),t.status?e("el-form-item",{attrs:{label:"状态："}},[e("el-switch",{attrs:{"active-text":"显示","inactive-text":"隐藏"},model:{value:t.value,callback:function(i){t.value=i},expression:"value"}})],1):t._e(),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{staticStyle:{"text-align":"center"},attrs:{type:"primary"},on:{click:function(i){t.submit("form")}}},[t._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var r=e("VU/8")(l,o,!1,function(t){e("ORRb"),e("BJ3J")},"data-v-65f89805",null);i.default=r.exports}});
//# sourceMappingURL=15.731f927ff749f3c1e0e8.js.map